<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Auto Suggest</title>
        <meta name="description" content="AutoSuggest">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400" rel="stylesheet">        
        <link href="bootstrap.css" rel="stylesheet">

        <style type="text/css">
            html {
                height: 100%;
            }
            body {
                background: #f0f0f0;
                color: #464646;
                padding: 15px 10px;
                height: 100%;
                font-family: 'Source Sans Pro';
            }
            #root {
                background: #fff;
                box-shadow: 0 1px 1px #bababa;
                padding: 10px 20px 30px;
                width: 640px;
                margin: auto;
            }
            .heading {
                padding-bottom: 5px;
                border-bottom: 1px solid #ddd;
                margin-bottom: 40px;
            }
            .heading small {
                float: right;
                position: relative;
                bottom: -20px;
                font-size: 50%;
            }
            #input, #textarea, #contenteditable {
                border-radius: 0;
                line-height: 20px;
            }

            #contenteditable {
                height: 200px;
            }
        </style>
    </head>
    <body>
        <div id="root">
            <h1 class="heading">AutoSuggest <small>- by AvcS</small></h1>
            <p><strong>HEADSUP!!!</strong> This example is not for noobs and I am too lazy to write documentation.</p>
            <p>
                We will use following code, which covers all possible configurations in all possible input fields.
                <pre>
$('#input').autoSuggest($('#textarea').autoSuggest({
    suggestions: [
        {
            trigger: '&lt;',
            suggestions: [
                {
                    on: 'script',
                    show: 'script',
                    replaceWith: '&lt;script src="text/javascript"&gt;&lt;\/script&gt;',
                    cursorPosition: [-26, -11]
                }
            ]
        }, {
            trigger: '@',
            suggestions: [
                {
                    on: ['avcs', 'cham', 'chandu'],
                    show: 'Chandrasekhar Ambula V',
                    replaceWith: '@AmbulaV'
                }
            ]
        }, {
            trigger: '//',
            suggestions: [
                'hello',
                'world',
                'idiot',
                'stupid',
                'rascal',
                'avcs'
            ]
        }, function (keyword, callback) {
            keyword = keyword.toLowerCase();

            var results = [];
            var dataset = $('#input').val() + $('#textarea').val();
            dataset = dataset.toLowerCase().split(/\s+/);
            dataset.forEach(function(word) {
                if(
                    word.length >= 4 &&
                    !word.indexOf(keyword) &&
                    word !== keyword &&
                    results.indexOf(word) === -1
                ) {
                    results.push(word);   
                }
            });
            callback(results);
        }
    ]
}));
                </pre>
            </p>
            <h3 class="subheading">Input Demo</h3>
            <input type="text" id="input" class="form-control" />
            <h3 class="subheading">Textarea Demo</h3>
            <textarea id="textarea" class="form-control" rows="4"></textarea>
            <h3 class="subheading">Contenteditable Demo</h3>
            <div contenteditable="true" id="contenteditable" class="form-control" ></div>
        </div>

        <script src="jquery.js"></script>
        <script src="AutoSuggest.js"></script>
        <script type="text/javascript">
            $('#input').autoSuggest($('#textarea').autoSuggest({
                suggestions: [
                    {
                        trigger: '<',
                        suggestions: [
                            {
                                on: 'script',
                                show: 'script',
                                replaceWith: '<script src="text/javascript"><\/script>',
                                cursorPosition: [-26, -11]
                            }
                        ]
                    }, {
                        trigger: '@',
                        suggestions: [
                            {
                                on: ['avcs', 'cham', 'chandu'],
                                show: 'Chandrasekhar Ambula V',
                                replaceWith: '@AmbulaV'
                            }
                        ]
                    }, {
                        trigger: '//',
                        suggestions: [ 'hello', 'world', 'idiot', 'stupid', 'rascal', 'avcs' ]
                    }, function (keyword, callback) {
                        keyword = keyword.toLowerCase();

                        var results = [];
                        var dataset = $('#input').val() + $('#textarea').val();
                        dataset = dataset.toLowerCase().split(/\s+/);
                        dataset.forEach(function(word) {
                            if(
                                word.length >= 4 &&
                                !word.indexOf(keyword) &&
                                word !== keyword &&
                                results.indexOf(word) === -1
                            ) {
                                results.push(word);   
                            }
                        });
                        callback(results);
                    }
                ]
            }));
        </script>
    </body>
</html>
